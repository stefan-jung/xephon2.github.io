---
layout: post
title: "Boosting Oxygen XML Performance Using An Icon Font"
description: ""
category:
tags: [Oxygen]
---
In a complex DITA environment with hundreds of DITA keys and CSS rules, [oXygen](http://oxygenxml.com/) gets really slow. Rendering a topic in author view sometimes takes up to 30 seconds. I discovered, that oXygen renders [oxy_button](http://www.oxygenxml.com/doc/versions/17.0/ug-editor/#concepts/button-editor.html) form control elements very slowly. But these form control elements are mandatory, if your authors like to work in author view with hidden XML tags.


## Buttons

But first, let's create a simple CSS rule to move list items up and down using an oxy_button with an icon. It is highly recommended to create another framework or at least create new CSS files and let the default files untouched. In this example, I will directly edit a default CSS file, because I do not want to explain how to create a new framework.


I open the `~/Oxygen XML Editor 17/frameworks/dita/css/core/-topic-body-lists.css`.

Create this new rule:

{% highlight css %}
*[class~="topic/ul"] > *[class~="topic/li"]:after {
  content:
    oxy_button(
      action, oxy_action(
        name, 'Move Up',
        description, 'Move the element up',
        icon, url('arrow-up.png'),
        operation, 'ro.sync.ecss.extensions.commons.operations.MoveElementOperation',
        arg-sourceLocation, "self::*[contains(@class, ' topic/li ')]"
        arg-targetLocation, "following-sibling::*[contains(@class, ' topic/li ')][1]",
        arg-insertLocation, "After"
      )
      showIcon, true
    )
    oxy_button(
      action, oxy_action(
        name, 'Move Down',
        description, 'Move the element up',
        icon, url('arrow-down.png'),
        operation, 'ro.sync.ecss.extensions.commons.operations.MoveElementOperation',
        arg-sourceLocation, "self::*[contains(@class, ' topic/li ')]"
        arg-targetLocation, "following-sibling::*[contains(@class, ' topic/li ')][1]",
        arg-insertLocation, "After"
      )
      showIcon, true
    );
}
{% endhighlight %}

Now get an arrow-up and an arrow-down icon, e.g. `arrow_up.png` and `arrow_down.png` from the [Silk Icons](http://www.famfamfam.com/lab/icons/silk/) and copy them to your CSS directory.

## Sample Topic

Now create a sample DITA topic.

{% highlight xml %}
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="myTopic">
  <title>My Topic</title>
  <body>
    <ul>
      <li>First list item</li>
      <li>Second list item</li>
    </ul>
  </body>
</topic>
{% endhighlight %}

The icons should now appear in the author view. Try to move the `<li>` elements up and down. This works great, if you have only a few icons, but gets slow, if you have hundreds of them in a topic.

Now we are going to replace the icons.

1. Move to [Fontello](http://fontello.com/).
2. Select the *Font Awesome* icons *up-big* and *down-big*.
3. Click the **Download webfont** button.
4. Open the *fontello.css*.

Examine the following block:

{% highlight css %}
@font-face {
  font-family: 'fontello';
  src: url('../font/fontello.eot?41249015');
  src: url('../font/fontello.eot?41249015#iefix') format('embedded-opentype'),
       url('../font/fontello.woff?41249015') format('woff'),
       url('../font/fontello.ttf?41249015') format('truetype'),
       url('../font/fontello.svg?41249015#fontello') format('svg');
  font-weight: normal;
  font-style: normal;
}
{% endhighlight %}

This block defines your font-face. oXygen needs the truetype font-face. Remove the other URLs. The block should look like that:

{% highlight css %}
@font-face {
  font-family: 'fontello';
  src: url('../font/fontello.ttf?41249015') format('truetype');
  font-weight: normal;
  font-style: normal;
}
{% endhighlight %}

1. Copy the `fontello` directory to your DITA CSS directory.
2. Copy the `@font-face` rule to your `~/Oxygen XML Editor 17/frameworks/dita/css/core/-topic-body-lists.css`.
3. Now change the path of the URL to match the `fontello.ttf`
4. Now set `showIcon` to `false` and replace the names with the entities of the icons. Look them up in the `fontello.css`

{% highlight css %}
.icon-up-big:before { content: '\e800'; } /* '' */
.icon-down-big:before { content: '\e801'; } /* '' */
{% endhighlight %}

5. Add some CSS rules to make sure, the icons are correctly displayed:

{% highlight css %}
font-family: "fontello";
font-style: normal;
font-weight: normal;
speak: none;
width: 1em;
margin-right: .2em;
text-align: center;
font-variant: normal;
text-transform: none;
line-height: 1em;
{% endhighlight %}

Your CSS should now look like that:

{% highlight css %}
*[class~="topic/ul"] > *[class~="topic/li"]:after {
  content:
    oxy_button(
      action, oxy_action(
        name, 'Move Up',
        description, 'Move the element up',
        icon, url('arrow-up.png'),
        operation, 'ro.sync.ecss.extensions.commons.operations.MoveElementOperation',
        arg-sourceLocation, "self::*[contains(@class, ' topic/li ')]"
        arg-targetLocation, "following-sibling::*[contains(@class, ' topic/li ')][1]",
        arg-insertLocation, "After"
      )
      showIcon, true
    )
    oxy_button(
      action, oxy_action(
        name, 'Move Down',
        description, 'Move the element up',
        icon, url('arrow-down.png'),
        operation, 'ro.sync.ecss.extensions.commons.operations.MoveElementOperation',
        arg-sourceLocation, "self::*[contains(@class, ' topic/li ')]"
        arg-targetLocation, "following-sibling::*[contains(@class, ' topic/li ')][1]",
        arg-insertLocation, "After"
      )
      showIcon, true
    );
  font-family: "fontello";
  font-style: normal;
  font-weight: normal;
  speak: none;
  width: 1em;
  margin-right: .2em;
  text-align: center;
  font-variant: normal;
  text-transform: none;
  line-height: 1em;
}
{% endhighlight %}

Now oXygen should render the icons. If not, restart oXygen and open the topic in author view again.
